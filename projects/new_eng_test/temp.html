
<!DOCTYPE html>
<html>
	<style>
		head, body {
			position: absolute;
			top: 0px;
			left: 0px;
			right: 0px;
			bottom: 0px;
			margin: 0px;
			overflow: hidden;
		}
		#game {
			width: 100%;
			height: 100%;
		}
		body > img {
			width: 100%;
			height: 100%;
		}
	</style>
	<head>
		<script src="..\../blankejs/pixi.min.js"></script>
		<script src="..\../blankejs/SAT.min.js"></script>
		<script src="..\../blankejs/blanke.js"></script>
	</head>
	
		<body>
			<div id="game"></div>
		</body>
		<script>
			let app = window.parent.app;
			window.addEventListener('dragover', function(e) {
				e.preventDefault();
				app.showDropZone();
				return false;
			});
			window.addEventListener('drop', function(e) {
				e.preventDefault();
	
				if (app.isProjectOpen()) {
					app.dropFiles(e.dataTransfer.files);
					app.getElement("#drop-zone").classList.remove("active");
				}
	
				return false;
			});
			window.addEventListener('dragleave', function(e) {
				e.preventDefault();
				return false;
			});
			var game = Blanke("#game",{
				config: {"scene":{"objects":{"dd7918ee":{"name":"player","char":"P","color":"#ff0080","size":[21,32],"uuid":"dd7918ee"},"7398c5bc":{"name":"ground","char":"G","color":"#ffff00","size":[16,16],"uuid":"7398c5bc"},"1c77eb2b":{"name":"player_die","char":"D","color":"#ff2600","size":[16,16],"uuid":"1c77eb2b"},"784fb058":{"name":"moving_block","char":"M","color":"#ff8000","size":[32,32],"uuid":"784fb058"},"6684c80c":{"name":"door","char":"Y","color":"#804000","size":[16,16],"uuid":"6684c80c"},"4d96c227":{"name":"spike_block","char":"B","color":"#804040","size":[16,16],"uuid":"4d96c227"},"f148287c":{"name":"spike_blockStop","char":"$","color":"#ffffff","size":[16,16],"uuid":"f148287c"},"a8816ff5":{"name":"lvl_start","char":"I","color":"#00ff00","size":[16,16],"uuid":"a8816ff5"},"208e7bca":{"name":"lvl_end","char":">","color":"#ff0000","size":[16,16],"uuid":"208e7bca"},"dac2318c":{"name":"boss1","char":"%","color":"#400000","size":[36,41],"uuid":"dac2318c"},"1704d412":{"name":"lvl_end","char":"U","color":"#ff2600","size":[32,32],"uuid":"1704d412"},"f965a2fa":{"name":"lvl_start","char":"R","color":"#00f900","size":[32,32],"uuid":"f965a2fa"},"da04e1b6":{"name":"spawn","char":"5","color":"#00fdff","size":[16,16],"uuid":"da04e1b6"},"882bbb6a":{"name":"boss1_stopper","char":"E","color":"#ff8080","size":[32,32],"uuid":"882bbb6a"}},"object_order":["dd7918ee","7398c5bc","1c77eb2b","784fb058","6684c80c","4d96c227","f148287c","a8816ff5","208e7bca","dac2318c","1704d412","f965a2fa","da04e1b6","882bbb6a"]},"spritesheet_prvw":{"image/boss1_walk1.png":{"name":"walk1","offset":[0,0],"speed":0.4,"frame size":[36,41],"frames":2,"selected frames":[],"columns":2,"padding":[0,0],"image":"image/boss1_walk1.png"},"image/player_walk.png":{"name":"walk","offset":[0,0],"speed":0.2,"frame size":[21,33],"frames":2,"selected frames":[1,1],"columns":2,"padding":[0,0],"image":"image/player_walk.png"}},"export":{"name":"boredom","remove_unused":true,"web_autoplay":false,"web_memory":120,"web_stack":4},"ico":"src\\logo.ico","icns":"src\\logo.icns","os":"web","ignore_modules":["Audio","Bezier","Dialog","Map","Mask","Net","Save","Steam","UI"],"first_scene":"Play"},
				fill_parent: true,
				width: 800,
				height: 600,
				background_color: 0x485358
			});
			
(function(){
	let { Asset, Draw, Entity, Game, Hitbox, Input, Map, Scene, Sprite, Util, View } = game;
	let TestScene = (funcs) => {
	
	}
class Player extends Entity {
	init () {
		this.addSprite('player_stand');
		this.z = 20;
	}
	update (dt) {
		this.hspeed = 0;
		this.vspeed = 0;
		if (Input("move_right").pressed)    this.hspeed = 5;
		if (Input("move_left").pressed)     this.hspeed = -5;
		if (Input("move_up").pressed)       this.vspeed = -5;
		if (Input("move_down").pressed)     this.vspeed = 5;
	}
}

TestScene({
	onStart: () => {
		let player = new Player();
		player.x = 20;
		player.y = 20;
	}
})

Scene("Play",{
    onStart: function() {
		for (let p=0; p<10; p++) {
			let bob = new Player;
			bob.x = Util.rand_range(10, Game.width - 10);
			bob.y = Util.rand_range(10, Game.height - 10);
		}	
    },
    onUpdate: function() {
        
    },
    onEnd: function() {

    }
});

Asset.add([
	["assets/image/player_stand.png"],
	["assets/image/ground.png"],
	//["assets/maps/level1.map"],
	['assets/image/sprite-example.png',{name:'luigi_walk',offset:[9,54],speed:0.2,frame_size:[27,49],frames:3,columns:3}]
]);

Input.set("move_left","left","a");
Input.set("move_right","right","d");
Input.set("move_up","up","w");
Input.set("move_down","down","s");

Scene.start("Play");

})();
		</script>
</html>
