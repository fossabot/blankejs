<!DOCTYPE html>
<html>
	<head>
        <script src="pixi.min.js"></script>
        <script src="SAT.min.js"></script>
        <script src="blanke.js"></script>
    </head>
    <body>
        <div id="game"></div>
    </body>
    <script type="text/javascript">
        window.onload = () => {
            let { Asset, Draw, Entity, Game, Hitbox, Input, Map, Scene, Sprite, Util, View } = Blanke("#game",{
                config_file: "config.json"
            });
            Scene("scene1",{
			onStart: (scene) => {
				let drawing = new Draw(
					['fill',Draw.white],
					['rect',-800,-800,1600,1600],
					['lineStyle', 2, Draw.white],
					['fill', Draw.green, 1],
					['star', Game.width/2, Game.height/2, 5, 50],
					['fill']
				);
				new Hitbox({tag:'ground', type:'rect', shape:[80,80,40,40]})
				new Hitbox({tag:'ground', type:'rect', shape:[180,0,20,Game.height]});
				new Hitbox({tag:'ground', type:'rect', shape:[0,180,Game.width,20]});
			
				let vw_main = View("main");
				vw_main.add(scene);
				vw_main.scale.set(1.5);
			},
			onUpdate: (scene, dt) => {
				let vw_main = View("main");
				console.log('wat')
				//vw_main.angle += 0.2 * dt;
			}
		});
		Scene.start("scene1");
            /*
            Asset.add([
                ["assets/image/player_stand.png"],
                ["assets/image/ground.png"],
                ["assets/maps/level1.map"],
                ['sprite-example.png',{name:'luigi_walk',offset:[9,54],speed:0.2,frame_size:[27,49],frames:3,columns:3}]
            ]);
            
            Input.set("move_left","left","a");
            Input.set("move_right","right","d");
            Input.set("move_up","up","w");
            Input.set("move_down","down","s");
            // Input.move_up.can_repeat = false;

            Map.config = {
                tile_hitboxes: ["ground"],
                hitboxes: ["ground", "player_die", "spike_blockStop", "boss1_stopper"],
                entities: []
            }
            
            class Player extends Entity {
                init () {
                    this.addSprite('player_stand');
                    this.z = 20;
                }
                update (dt) {
                    this.hspeed = 0;
                    this.vspeed = 0;
                    if (Input("move_right").pressed)    this.hspeed = 5;
                    if (Input("move_left").pressed)     this.hspeed = -5;
                    if (Input("move_up").pressed)       this.vspeed = -5;
                    if (Input("move_down").pressed)     this.vspeed = 5;
                }
            }

            Scene("play",{
                onStart: async function () {
                    let m_level1 = await Map.load('level1');
                    m_level1.z = 0;
                    let vw_main = View("main")
                    let player = new Player();
                    vw_main.background_color = Draw.white;
                    vw_main.follow(player)
                    vw_main.add(m_level1)
                }
            }).start();
        */
        }
    </script>
</html>